<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXORA | INSTALLER PORTAL</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        cyberpink: '#ff2a6d',
                        cyberblue: '#05d9e8',
                        cyberpurple: '#d300c5',
                        darkbg: '#0d0221',
                    },
                    fontFamily: {
                        rajdhani: ['Rajdhani', 'sans-serif'],
                        orbitron: ['Orbitron', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@400;700&display=swap" rel="stylesheet">
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Cyberpunk Base Styles */
        body {
            background-color: #0d0221;
            font-family: 'Rajdhani', sans-serif;
            color: white;
            overflow-x: hidden;
        }
        
        /* Cyberpunk Text Effects */
        .cyber-text {
            text-shadow: 0 0 10px #05d9e8,
                         0 0 20px #05d9e8,
                         0 0 40px #05d9e8;
            animation: flicker 1.5s infinite alternate;
        }
        
        @keyframes flicker {
            0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% {
                text-shadow: 0 0 10px #05d9e8,
                             0 0 20px #05d9e8,
                             0 0 40px #05d9e8;
            }
            20%, 24%, 55% {
                text-shadow: none;
            }
        }
        
        /* Glass Morphism */
        .glass-panel {
            background: rgba(13, 2, 33, 0.25);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(5, 217, 232, 0.18);
            box-shadow: 0 8px 32px 0 rgba(255, 42, 109, 0.37);
        }
        
        /* Neon Button */
        .neon-btn {
            background: linear-gradient(90deg, #ff2a6d, #d300c5);
            box-shadow: 0 0 10px rgba(255, 42, 109, 0.5),
                        0 0 20px rgba(211, 0, 197, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .neon-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(255, 42, 109, 0.8),
                        0 0 30px rgba(211, 0, 197, 0.5);
        }
        
        /* Scanline Effect */
        .scanline {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to bottom,
                rgba(5, 217, 232, 0) 95%,
                rgba(5, 217, 232, 0.1) 96%,
                rgba(5, 217, 232, 0) 100%
            );
            animation: scan 8s linear infinite;
            pointer-events: none;
            z-index: 100;
        }
        
        @keyframes scan {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100%); }
        }
        
        /* Connection Status Indicator */
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        
        .status-connected {
            background-color: #05d9e8;
            box-shadow: 0 0 10px #05d9e8;
        }
        
        .status-disconnected {
            background-color: #ff2a6d;
        }
        
        /* Terminal Output */
        .terminal {
            background-color: rgba(0, 0, 0, 0.7);
            border: 1px solid #05d9e8;
            font-family: monospace;
            height: 200px;
            overflow-y: auto;
            padding: 10px;
        }
        
        .terminal-line {
            margin: 0;
            line-height: 1.5;
        }
        
        .terminal-command {
            color: #05d9e8;
        }
        
        .terminal-success {
            color: #00ff00;
        }
        
        .terminal-error {
            color: #ff2a6d;
        }
    </style>
</head>
<body class="relative">
    <!-- Scanline Effect -->
    <div class="scanline"></div>
    
    <!-- Main Container -->
    <div class="min-h-screen flex flex-col">
        <!-- Header -->
        <header class="glass-panel p-4 flex items-center justify-between">
            <div class="flex items-center">
                <div class="w-10 h-10 rounded-full bg-cyberblue flex items-center justify-center">
                    <i class="fas fa-bolt text-darkbg"></i>
                </div>
                <h1 class="text-xl font-bold ml-3 cyber-text">NEXORA INSTALLER PORTAL</h1>
            </div>
            <div class="flex items-center space-x-4">
                <div id="connectionStatus" class="flex items-center">
                    <span class="status-indicator status-disconnected"></span>
                    <span>DISCONNECTED</span>
                </div>
                <button class="neon-btn px-4 py-2 rounded-lg">
                    <i class="fas fa-sign-out-alt mr-2"></i>
                    LOGOUT
                </button>
            </div>
        </header>
        
        <!-- Main Content -->
        <main class="flex-1 p-6">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Device Setup Panel -->
                <div class="glass-panel p-6 rounded-xl lg:col-span-2">
                    <h2 class="text-xl font-bold mb-6">NODEMCU SETUP</h2>
                    
                    <!-- Connection Section -->
                    <div class="mb-8">
                        <h3 class="font-bold mb-4">STEP 1: CONNECT DEVICE</h3>
                        <div class="flex items-center space-x-4 mb-4">
                            <button id="detectDeviceBtn" class="neon-btn px-6 py-3 rounded-lg flex-1">
                                <i class="fas fa-search mr-2"></i>
                                DETECT NODEMCU
                            </button>
                            <select id="serialPortSelect" class="bg-darkbg border border-cyberblue rounded-lg px-4 py-3 flex-1" disabled>
                                <option value="">No devices found</option>
                            </select>
                        </div>
                        <div class="flex justify-center">
                            <div class="w-16 h-16 border-4 border-cyberblue border-dashed rounded-full flex items-center justify-center">
                                <i class="fas fa-usb text-3xl text-cyberblue"></i>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Firmware Section -->
                    <div class="mb-8">
                        <h3 class="font-bold mb-4">STEP 2: FLASH FIRMWARE</h3>
                        <div class="flex items-center space-x-4 mb-4">
                            <select id="firmwareSelect" class="bg-darkbg border border-cyberblue rounded-lg px-4 py-3 flex-1">
                                <option value="default">Default Nexora Firmware</option>
                                <option value="custom">Custom Firmware...</option>
                            </select>
                            <button id="flashFirmwareBtn" class="neon-btn px-6 py-3 rounded-lg flex-1" disabled>
                                <i class="fas fa-upload mr-2"></i>
                                FLASH DEVICE
                            </button>
                        </div>
                        <div class="progress-container hidden mb-2">
                            <div class="flex justify-between text-sm mb-1">
                                <span>Flashing progress:</span>
                                <span id="progressPercent">0%</span>
                            </div>
                            <div class="w-full bg-darkbg rounded-full h-2.5">
                                <div id="progressBar" class="bg-cyberblue h-2.5 rounded-full" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Configuration Section -->
                    <div>
                        <h3 class="font-bold mb-4">STEP 3: DEVICE CONFIGURATION</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <label class="block text-sm mb-1">Device Name</label>
                                <input type="text" id="deviceName" class="w-full bg-darkbg border border-cyberblue rounded-lg px-4 py-3" placeholder="Living Room Light">
                            </div>
                            <div>
                                <label class="block text-sm mb-1">Location</label>
                                <input type="text" id="deviceLocation" class="w-full bg-darkbg border border-cyberblue rounded-lg px-4 py-3" placeholder="Main Hall">
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <label class="block text-sm mb-1">WiFi SSID</label>
                                <input type="text" id="wifiSsid" class="w-full bg-darkbg border border-cyberblue rounded-lg px-4 py-3" placeholder="Your WiFi Network">
                            </div>
                            <div>
                                <label class="block text-sm mb-1">WiFi Password</label>
                                <input type="password" id="wifiPassword" class="w-full bg-darkbg border border-cyberblue rounded-lg px-4 py-3" placeholder="••••••••">
                            </div>
                        </div>
                        <button id="saveConfigBtn" class="neon-btn px-6 py-3 rounded-lg w-full mt-4" disabled>
                            <i class="fas fa-save mr-2"></i>
                            SAVE CONFIGURATION & DEPLOY
                        </button>
                    </div>
                </div>
                
                <!-- Terminal Output -->
                <div class="glass-panel p-6 rounded-xl">
                    <h2 class="text-xl font-bold mb-4">SYSTEM LOG</h2>
                    <div class="terminal mb-4">
                        <p class="terminal-line">> Nexora Installer v1.0 initialized</p>
                        <p class="terminal-line">> Waiting for device connection...</p>
                    </div>
                    <div class="flex justify-between">
                        <button id="clearLogBtn" class="px-4 py-2 rounded-lg border border-cyberblue">
                            <i class="fas fa-trash mr-2"></i>
                            CLEAR LOG
                        </button>
                        <button id="copyLogBtn" class="px-4 py-2 rounded-lg border border-cyberblue">
                            <i class="fas fa-copy mr-2"></i>
                            COPY LOG
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // DOM Elements
        const detectDeviceBtn = document.getElementById('detectDeviceBtn');
        const serialPortSelect = document.getElementById('serialPortSelect');
        const flashFirmwareBtn = document.getElementById('flashFirmwareBtn');
        const saveConfigBtn = document.getElementById('saveConfigBtn');
        const connectionStatus = document.getElementById('connectionStatus');
        const terminal = document.querySelector('.terminal');
        const progressContainer = document.querySelector('.progress-container');
        const progressBar = document.getElementById('progressBar');
        const progressPercent = document.getElementById('progressPercent');

        // Mock device detection (will be replaced with actual serial port access)
        detectDeviceBtn.addEventListener('click', () => {
            logToTerminal("> Scanning for NodeMCU devices...");
            
            // Simulate device detection delay
            setTimeout(() => {
                // Mock found devices
                serialPortSelect.innerHTML = `
                    <option value="">Select a device</option>
                    <option value="/dev/ttyUSB0">NodeMCU (USB0)</option>
                    <option value="/dev/ttyUSB1">NodeMCU (USB1)</option>
                `;
                serialPortSelect.disabled = false;
                logToTerminal("> Found 2 NodeMCU devices");
            }, 1500);
        });

        // Handle port selection
        serialPortSelect.addEventListener('change', (e) => {
            if (e.target.value) {
                logToTerminal(`> Selected device: ${e.target.value}`);
                updateConnectionStatus(true);
                flashFirmwareBtn.disabled = false;
            } else {
                updateConnectionStatus(false);
                flashFirmwareBtn.disabled = true;
            }
        });

        // Firmware flashing
        flashFirmwareBtn.addEventListener('click', () => {
            const firmware = document.getElementById('firmwareSelect').value;
            logToTerminal(`> Starting firmware flash: ${firmware}`);
            
            // Show progress bar
            progressContainer.classList.remove('hidden');
            
            // Simulate flashing progress
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 10;
                if (progress > 100) progress = 100;
                
                progressBar.style.width = `${progress}%`;
                progressPercent.textContent = `${Math.floor(progress)}%`;
                
                if (progress === 100) {
                    clearInterval(interval);
                    logToTerminal("> Firmware flash completed successfully!", "success");
                    saveConfigBtn.disabled = false;
                }
            }, 300);
        });

        // Save configuration
        saveConfigBtn.addEventListener('click', () => {
            const deviceName = document.getElementById('deviceName').value;
            const deviceLocation = document.getElementById('deviceLocation').value;
            const wifiSsid = document.getElementById('wifiSsid').value;
            
            if (!deviceName || !deviceLocation || !wifiSsid) {
                logToTerminal("> Error: Please fill all required fields", "error");
                return;
            }
            
            logToTerminal("> Saving configuration to device...");
            logToTerminal(`> Device Name: ${deviceName}`);
            logToTerminal(`> Location: ${deviceLocation}`);
            logToTerminal(`> WiFi Network: ${wifiSsid}`);
            
            // Simulate save delay
            setTimeout(() => {
                logToTerminal("> Configuration saved successfully!", "success");
                logToTerminal("> Device is now ready for deployment");
                showSuccessNotification();
            }, 2000);
        });

        // Terminal functions
        function logToTerminal(message, type = "normal") {
            const line = document.createElement('p');
            line.className = 'terminal-line';
            
            if (type === "command") {
                line.classList.add('terminal-command');
                message = "> " + message;
            } else if (type === "success") {
                line.classList.add('terminal-success');
            } else if (type === "error") {
                line.classList.add('terminal-error');
            }
            
            line.textContent = message;
            terminal.appendChild(line);
            terminal.scrollTop = terminal.scrollHeight;
        }

        // Connection status
        function updateConnectionStatus(connected) {
            const indicator = connectionStatus.querySelector('.status-indicator');
            const text = connectionStatus.querySelector('span:last-child');
            
            if (connected) {
                indicator.classList.remove('status-disconnected');
                indicator.classList.add('status-connected');
                text.textContent = "CONNECTED";
            } else {
                indicator.classList.remove('status-connected');
                indicator.classList.add('status-disconnected');
                text.textContent = "DISCONNECTED";
            }
        }

        // Success notification
        function showSuccessNotification() {
            const notification = document.createElement('div');
            notification.className = 'fixed bottom-4 right-4 glass-panel px-6 py-4 rounded-lg border-l-4 border-green-500';
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-check-circle text-green-500 mr-3 text-xl"></i>
                    <div>
                        <h4 class="font-bold">Device Ready!</h4>
                        <p class="text-sm">NodeMCU is configured and ready for deployment</p>
                    </div>
                </div>
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            logToTerminal("> Installer portal initialized", "command");
        });
    </script>
</body>
</html>
